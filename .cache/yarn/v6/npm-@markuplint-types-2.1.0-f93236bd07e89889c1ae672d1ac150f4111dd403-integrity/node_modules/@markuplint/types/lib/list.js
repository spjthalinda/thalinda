"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.checkList = void 0;
const check_1 = require("./check");
const match_result_1 = require("./match-result");
const token_1 = require("./token");
function checkList(value, type, ref, cache = true) {
    const tokens = new token_1.TokenCollection(value, type);
    const matches = tokens.check({ ref });
    if (!matches.matched) {
        return matches;
    }
    const identTokens = tokens.getIdentTokens();
    for (const token of identTokens) {
        const res = (0, check_1.check)(token.value, type.token, ref, cache);
        if (!res.matched) {
            const { offset, line, column } = token_1.Token.shiftLocation(token, res.offset);
            return {
                ...res,
                partName: res.partName || 'the content of the list',
                offset,
                line,
                column,
            };
        }
    }
    return (0, match_result_1.matched)();
}
exports.checkList = checkList;
