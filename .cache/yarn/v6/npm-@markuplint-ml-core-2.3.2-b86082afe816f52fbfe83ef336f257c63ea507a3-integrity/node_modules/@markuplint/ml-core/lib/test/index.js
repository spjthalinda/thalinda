"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.dummySchemas = exports.createTestElement = exports.createTestNodeList = exports.createTestDocument = void 0;
const html_parser_1 = require("@markuplint/html-parser");
const convert_ruleset_1 = require("../convert-ruleset");
const ml_dom_1 = require("../ml-dom");
function createTestDocument(sourceCode, options) {
    const ast = (options === null || options === void 0 ? void 0 : options.parser) ? options.parser.parse(sourceCode) : (0, html_parser_1.parse)(sourceCode);
    const ruleset = (0, convert_ruleset_1.convertRuleset)(options === null || options === void 0 ? void 0 : options.config);
    const document = new ml_dom_1.Document(ast, ruleset, [{}, {}]);
    return document;
}
exports.createTestDocument = createTestDocument;
function createTestNodeList(sourceCode, options) {
    const document = createTestDocument(sourceCode, options);
    return document.nodeList;
}
exports.createTestNodeList = createTestNodeList;
function createTestElement(sourceCode, options) {
    const document = createTestDocument(sourceCode, options);
    const el = document.nodeList[0];
    if (el.type === 'Element') {
        return el;
    }
    throw TypeError(`Could not parse it to be an element from: ${sourceCode}`);
}
exports.createTestElement = createTestElement;
/**
 * for test suite
 */
function dummySchemas() {
    // @ts-ignore
    return [{}, {}];
}
exports.dummySchemas = dummySchemas;
